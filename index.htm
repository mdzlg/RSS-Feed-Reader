<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>RSS Feed Reader</title>

    <link href="assets/bootstrap.min.css" rel="stylesheet">
    <link href="assets/styles.css" rel="stylesheet">
</head>
<body>

    <div class="header">
        <div class="menu">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6">
                        <h1>Noticias</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="news">
        <div class="container">
          <div class="row" id="row"></div>
          <hr>
          <footer>
            <p>&copy; LG RSS Reader 2017</p>
          </footer>
        </div>
    </div>

    <script src="assets/jquery-3.2.0.min.js"></script>
    <script src="assets/tether.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/ie10-viewport-bug-workaround.js"></script>

    <script type="text/javascript">
        var api_key = 'd1ufn2m6kmtwzt6iw9symnlfycs0d4nfkcybdxmv';
        var rss_url = 'http://feeds.feedburner.com/TitularesLaGaceta';
        var url_base = 'http://www.lagaceta.com.ar/';

        var categories = {
            "Último momento": {path:"ultimo-momento"},
            "Actualidad": {path:"actualidad"},
            "Política": {path:"politica"},
            "Economía": {path:"economia"},
            "Mundo": {path:"mundo"},
            "Policiales": {path:"policiales"},
            "Sociedad": {path:"sociedad"},
            "LG WhatsApp": {path:"tags/11861/lg-whatsapp"},
            "Espectáculos": {path:"espectaculos"},
            "Cine": {path:"tags/2334/cine"},
            "Teatro": {path:"tags/2333/teatro"},
            "Música": {path:"tags/2335/musica"},
            "Guía para salir": {path:"tags/2399/guia-para-salir"},
            "Punto de vista": {path:"opinion"},
            "Editorial": {path:"editorial"},
            "Columnas": {path:"columnas"},
            "Cartas de lectores": {path:"cartas-lectores"},
            "Directorio periodistas": {path:"columnistas"},
            "Me Gusta": {path:"me-gusta"},
            "Tecnología": {path:"tecnologia"},
            "Famosos": {path:"tags/2337/famosos"},
            "En las redes": {path:"noticia-loca"},
            "Sociales": {path:"sociales"},
            "Deportes": {path:"deportes"},
            "Atlético": {path:"tags/456/club-atletico-tucuman"},
            "San Martín": {path:"tags/455/club-atletico-san-martin-tucuman"},
            "Torneo Federal A": {path:"tags/12626/torneo-federal-a"},
            "Fútbol": {path:"futbol"},
            "Rugby": {path:"rugby"},
            "Hockey": {path:"hockey"},
            "Tenis": {path:"tenis"},
            "Motores": {path:"motores"},
            "Más deportes": {path:"polideportivo"},
            "Videos": {path:"videos"},
            "Blogs": {path:"blogs"},
            "Humor gráfico": {path:"blogs/humorgrafico"},
            "Directorio": {path:"blogs/directorio"},
            "Servicios": {path:"servicios"},
            "Dólar hoy": {path:"dolar-hoy"},
            "Clima": {path:"clima"},
            "Números de LA GACETA": {path:"numeros-oro"},
            "Guía para salir": {path:"tags/2399/agenda-gps"},
            "Horóscopo": {path:"horoscopo"},
            "Loterías y quinielas": {path:"quinielas"}
        };

        function searchCatURL (categorie) {
            if (categories[categorie]) {
                return url_base + categories[categorie].path;
            }
            return "javascript:void(0);";
        }

        $.ajax({
            url: 'https://api.rss2json.com/v1/api.json?api_key=' + api_key + '&rss_url=' + encodeURIComponent(rss_url),
            dataType: 'json',
            success: function (data) {

                /*console.log(data);*/

                if (data.status == "ok") {
                    $.each(data.items, function (index, callback) {
                        $("#row").append('<div class="col-md-4"><a class="" href="' + callback.link + '" role="button" target="_blank"><h5>' + callback.title + '</h5></a><p>' + callback.description + '</p><p id="tags-' + index + '"></p></div>');

                        $.each(callback.categories, function (indexCat, callbackCat) {
                            /*console.log(callbackCat);*/
                            $("#tags-" + index).append('<a class="btn btn-secondary btn-sm" href="' + searchCatURL(callbackCat) + '" role="button" target="_blank">' + callbackCat + '</a>');
                        });
                    });
                }
            }
        });
    </script>

</body>
</html>